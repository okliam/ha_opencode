#!/bin/bash
# Pre-commit hook to automatically update version shield when config.yaml version changes

# Check if config.yaml was modified
if git diff --cached --name-only | grep -q "ha_opencode/config.yaml"; then
    echo "config.yaml changed - updating version shield in README.md..."
    ./scripts/update-version-shield.sh
    
    # Stage the updated README.md if it changed
    if git diff --name-only | grep -q "README.md"; then
        git add README.md
        echo "Staged updated README.md with new version shield"
    fi
fi

exit 0
